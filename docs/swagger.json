{
  "openapi": "3.0.1",
  "info": {
    "title": "Sqordia API",
    "description": "Comprehensive API for business plan generation and management platform with Google OAuth authentication support",
    "version": "1.0.0",
    "contact": {
      "name": "Sqordia API Support",
      "email": "support@sqordia.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:5000",
      "description": "Development server"
    },
    {
      "url": "https://api.sqordia.com",
      "description": "Production server"
    }
  ],
  "paths": {
    "/api/v1/auth/register": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Register a new user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Login user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Get current user information",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "User information retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/google": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Authenticate with Google OAuth",
        "description": "Authenticate user using Google OAuth tokens. Creates new user if not exists, or links to existing user if email matches.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoogleAuthRequest"
              },
              "example": {
                "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjE2NzAyNzQ0NzQ...",
                "accessToken": "ya29.a0AfH6SMC..."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Authentication successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid Google token or bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/google/link": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Link Google account to existing user",
        "description": "Link a Google account to an existing local user account. Requires authentication.",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LinkGoogleAccountRequest"
              },
              "example": {
                "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjE2NzAyNzQ0NzQ...",
                "accessToken": "ya29.a0AfH6SMC..."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Google account linked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid Google token or account already linked",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Google account already linked to another user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/google/unlink": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Unlink Google account from user",
        "description": "Remove Google account association from user account. User must have a local password to unlink Google account.",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Google account unlinked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "User is not a Google user or cannot unlink",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organizations": {
      "get": {
        "tags": ["Organizations"],
        "summary": "Get user organizations",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Organizations retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/OrganizationDto"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Organizations"],
        "summary": "Create new organization",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateOrganizationRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Organization created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrganizationDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organizations/{organizationId}": {
      "get": {
        "tags": ["Organizations"],
        "summary": "Get organization details",
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "organizationId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Organization details retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrganizationDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/business-plans": {
      "get": {
        "tags": ["Business Plans"],
        "summary": "Get user business plans",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Business plans retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/BusinessPlanDto"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Business Plans"],
        "summary": "Create new business plan",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateBusinessPlanRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Business plan created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BusinessPlanDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/business-plans/{businessPlanId}": {
      "get": {
        "tags": ["Business Plans"],
        "summary": "Get business plan details",
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "businessPlanId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Business plan details retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BusinessPlanDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/obnl/plans": {
      "post": {
        "tags": ["OBNL Business Plans"],
        "summary": "Create OBNL business plan",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateOBNLPlanRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "OBNL plan created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OBNLPlanResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/obnl/plans/{planId}": {
      "get": {
        "tags": ["OBNL Business Plans"],
        "summary": "Get OBNL plan details",
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "planId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OBNL plan details retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OBNLPlanDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/templates": {
      "get": {
        "tags": ["Templates"],
        "summary": "Get all templates",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Templates retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TemplateDto"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Templates"],
        "summary": "Create new template",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTemplateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Template created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TemplateDto"
                }
              }
            }
          }
        }
      }
    },
    "/api/financial/projections": {
      "post": {
        "tags": ["Financial Management"],
        "summary": "Create financial projection",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFinancialProjectionRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Financial projection created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FinancialProjectionDto"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "RegisterRequest": {
        "type": "object",
        "required": ["email", "password", "firstName", "lastName"],
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string",
            "minLength": 8
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "organizationName": {
            "type": "string"
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": ["email", "password"],
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string"
          }
        }
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "isSuccess": {
            "type": "boolean"
          },
          "value": {
            "$ref": "#/components/schemas/UserDto"
          },
          "errorMessage": {
            "type": "string",
            "nullable": true
          }
        }
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "isSuccess": {
            "type": "boolean"
          },
          "value": {
            "type": "object",
            "properties": {
              "accessToken": {
                "type": "string"
              },
              "refreshToken": {
                "type": "string"
              },
              "expiresAt": {
                "type": "string",
                "format": "date-time"
              },
              "user": {
                "$ref": "#/components/schemas/UserDto"
              }
            }
          },
          "errorMessage": {
            "type": "string",
            "nullable": true
          }
        }
      },
      "UserDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "isEmailVerified": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "OrganizationDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "industry": {
            "type": "string"
          },
          "size": {
            "type": "string"
          },
          "website": {
            "type": "string",
            "format": "uri"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateOrganizationRequest": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "industry": {
            "type": "string"
          },
          "size": {
            "type": "string"
          },
          "website": {
            "type": "string",
            "format": "uri"
          }
        }
      },
      "BusinessPlanDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "industry": {
            "type": "string"
          },
          "businessType": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateBusinessPlanRequest": {
        "type": "object",
        "required": ["title"],
        "properties": {
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "industry": {
            "type": "string"
          },
          "businessType": {
            "type": "string"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "templateId": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "OBNLPlanDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "mission": {
            "type": "string"
          },
          "vision": {
            "type": "string"
          },
          "obnlType": {
            "type": "string"
          },
          "targetAudience": {
            "type": "string"
          },
          "goals": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "activities": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "fundingSources": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "complianceRequirements": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "complianceStatus": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateOBNLPlanRequest": {
        "type": "object",
        "required": ["organizationId", "mission", "vision", "obnlType"],
        "properties": {
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "mission": {
            "type": "string"
          },
          "vision": {
            "type": "string"
          },
          "obnlType": {
            "type": "string"
          },
          "targetAudience": {
            "type": "string"
          },
          "goals": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "activities": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "fundingSources": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "complianceRequirements": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "OBNLPlanResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "TemplateDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "category": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "industry": {
            "type": "string"
          },
          "audience": {
            "type": "string"
          },
          "language": {
            "type": "string"
          },
          "country": {
            "type": "string"
          },
          "isPublic": {
            "type": "boolean"
          },
          "usageCount": {
            "type": "integer"
          },
          "rating": {
            "type": "number"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateTemplateRequest": {
        "type": "object",
        "required": ["name", "description", "category"],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "category": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "industry": {
            "type": "string"
          },
          "audience": {
            "type": "string"
          },
          "language": {
            "type": "string"
          },
          "country": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "FinancialProjectionDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "businessPlanId": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "projectionType": {
            "type": "string"
          },
          "scenario": {
            "type": "string"
          },
          "year": {
            "type": "integer"
          },
          "month": {
            "type": "integer"
          },
          "amount": {
            "type": "number",
            "format": "decimal"
          },
          "currencyCode": {
            "type": "string"
          },
          "category": {
            "type": "string"
          },
          "subCategory": {
            "type": "string"
          },
          "isRecurring": {
            "type": "boolean"
          },
          "frequency": {
            "type": "string"
          },
          "growthRate": {
            "type": "number",
            "format": "decimal"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateFinancialProjectionRequest": {
        "type": "object",
        "required": ["businessPlanId", "name", "projectionType", "year", "amount"],
        "properties": {
          "businessPlanId": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "projectionType": {
            "type": "string"
          },
          "scenario": {
            "type": "string"
          },
          "year": {
            "type": "integer"
          },
          "month": {
            "type": "integer"
          },
          "amount": {
            "type": "number",
            "format": "decimal"
          },
          "currencyCode": {
            "type": "string"
          },
          "category": {
            "type": "string"
          },
          "subCategory": {
            "type": "string"
          },
          "isRecurring": {
            "type": "boolean"
          },
          "frequency": {
            "type": "string"
          },
          "growthRate": {
            "type": "number",
            "format": "decimal"
          },
          "assumptions": {
            "type": "string"
          },
          "notes": {
            "type": "string"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "isSuccess": {
            "type": "boolean",
            "example": false
          },
          "value": {
            "type": "object",
            "nullable": true
          },
          "errorMessage": {
            "type": "string"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "field": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "GoogleAuthRequest": {
        "type": "object",
        "required": ["idToken", "accessToken"],
        "properties": {
          "idToken": {
            "type": "string",
            "description": "Google ID token from OAuth flow",
            "example": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjE2NzAyNzQ0NzQ..."
          },
          "accessToken": {
            "type": "string",
            "description": "Google access token from OAuth flow",
            "example": "ya29.a0AfH6SMC..."
          }
        }
      },
      "LinkGoogleAccountRequest": {
        "type": "object",
        "required": ["idToken", "accessToken"],
        "properties": {
          "idToken": {
            "type": "string",
            "description": "Google ID token from OAuth flow",
            "example": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjE2NzAyNzQ0NzQ..."
          },
          "accessToken": {
            "type": "string",
            "description": "Google access token from OAuth flow",
            "example": "ya29.a0AfH6SMC..."
          }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "Operation completed successfully"
          }
        }
      }
    }
  }
}
